<!--
app.place-detail
Shows the details of any given place using a card
The card shows the name, address, available photos or a static map, hours, pricing
Enables the user to open the website of the place, in-app
Enables the user to call the place, in-app
Enables user to open the Place separately in a google map webpage
-->

<ion-view title="{{place.name}}">
	
	<ion-content class="category-bg">

		<div class="list card">

			<div class="item item-avatar">
				<img data-ng-src="{{place.icon}}">
				<h2>{{place.name}}</h2>
				<p>{{place.formatted_address}}</p>
			</div>

			<div class="item item-body">
                <button ng-show="auth.profile.can_add_places" ng-click="openModal()" class="button button-block button-positive icon-left ion-plus-round">
                    Add to Quarky Places
                </button>
				<p>
				<span ng-show="hasOpen">
					This Place is currently
						<span ng-show="place.opening_hours.open_now">open.</span>
						<span ng-hide="place.opening_hours.open_now">closed.</span>
						<br/>
				</span>
				<span ng-show="price">
					Items here are generally priced "{{price}}".<br/>
				</span>
				</p>

				<div ng-show="hasPhotos">

					<ion-slide-box show-pager="true">

						<ion-slide ng-repeat="photo in place.photos">
							<img width="300" data-ng-src="{{photo.url}}">
						</ion-slide>

					</ion-slide-box>	

				</div>

				<p ng-show="!hasPhotos">
				<img data-ng-src="https://maps.googleapis.com/maps/api/staticmap?center={{place.position.latitude}},{{place.position.longitude}}&zoom=14&markers=color:blue%7C{{place.position.latitude}},{{place.position.longitude}}&size=310x310&sensor=true" width="300" height="300" />
				</p>


			</div>

			<div class="item tabs tabs-secondary tabs-icon-left">
				<a class="tab-item" href="tel:{{place.formatted_phone_number}}"> 
					<i class="icon ion-ios7-telephone"></i> {{place.formatted_phone_number}}
				</a>	
				<a class="tab-item" ng-click="showPage(place.website)">
					<i class="icon ion-link"></i> Visit Website
				</a>	
				<a class="tab-item" ng-click="showPage('https://maps.google.com/maps?z=12&t=m&q=loc:'+place.position.latitude+'+'+place.position.longitude+'')">
					<i class="icon ion-map"></i> View Map
				</a>	
			</div>
		</div>
	</ion-content>
</ion-view>